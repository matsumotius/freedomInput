function onClickCanvas(event){
    if(event) {
	stackedStartX=event.pageX;
        stackedStartY=event.pageY;
        clicked=true;
    }
    return;
}

function onMoveCanvas(event){
    if(clicked&&event) {
        movingX=event.pageX;
        movingY=event.pageY;
        /* debug用 */
        // document.getElementById("pageX").value=event.pageX;                                                                
        // document.getElementById("pageY").value=event.pageY;                                                                
        var range=calculateRange(stackedStartX,stackedStartY,movingX,movingY);
        if(range > getDivision()){
            /* debug用 */
            // document.getElementById("pageX").value="!";
            if(!moved){
		moved=true;
	    } else {
		commandByAngle(calculateAngle(stackedStartX,stackedStartY,stackedEndX,stackedEndY,movingX,movingY));
		stackedStartX=stackedEndX;
		stackedStartY=stackedEndY;
	    }
	    stackedEndX=movingX;
	    stackedEndY=movingY;
        } else {
	    /* debug用 */
            // document.getElementById("pageX").value="";
        }
    }
    return;
}

function commandByAngle(angle) {
    if(150>angle&&angle>30){
	curve();
    } else if(30>angle&&angle>0) {
	reverse();
    } else if(180>angle&&angle>150) {
	straight();
    }
    return;
}

function curve() {
    if(mouseCurved) {
	mouseCurved=false;
    } else {
	mouseCurved=true;
    }
    return;
}

function reverse() {
    if(mouseReversed) {
	mouseReversed=false;
    } else {
	mouseReversed=true;
    }
    return;
}

function straight() {
    if(mouseReversed&&mouseCurved){
	curveCount--;
    } else if(mouseReversed) {
	reverseCount++;
    } else if(mouseCurved) {
	curveCount++;
    } else {
	straightCount++;
    }
    return;
}

